<!DOCTYPE html>
<html>
<head lang="zh-CN">
    <meta charset="UTF-8">
    <title>同袍智慧校园：登陆</title>

    <!--样式-->
    <link rel="stylesheet" href="../css/reset.css"/>
    <!--主要样式表-->
    <link rel="stylesheet" href="../css/login.css"/>
    <!--font awesome-->
    <link rel="stylesheet" href="../font-awesome-4.2.0/css/font-awesome.min.css"/>
    <!--UI 动画-->
    <link rel="stylesheet" href="../css/animate.css"/>

    <script src="../js/lib/iPtdqx.js"></script>


</head>
<body>
    <div id="mov-bg">
        <video  autoplay loop poster="../images/bg_new.jpg" width="100%">
            <source src="../Test-H5/Sample1.webm" type="video/webm">
            <source src="../Test-H5/Sample1.mp4" type="video/mp4">
        </video>
    </div>
    <div id="bg-glass"></div>
    <div id="login-tp" class="card flip in">
        <a class="buaa-logo"></a>
        <i class="logo-shadow"></i>
        <div class="tp-logo"></div>

        <form action="#">
            <input type="text" placeholder="用户名"/>
            <input type="password" placeholder="密码"/>
            <a class="button">
                <span class="fa fa-check"></span>
            </a>
            <a href="javascript:(function(){convert(card1,card2);})();" class="register-link">新用户注册</a>
            <a href="javascript:(function(){convert(card1,card3);})();" class="password-back-link">找回密码</a>
        </form>
    </div>

    <div id="register" class="card flip out">
        <a class="buaa-logo"></a>
        <i class="logo-shadow"></i>
        <table>
            <tr>
                <td><a href="#" class="active-link">一卡通激活</a></td>
                <td><a href="#" class="inactive-link">校友激活</a></td>
                <td><a href="#" class="inactive-link">新生激活</a></td>
            </tr>
        </table>
        <form id="register-one-card" class="active" action="#">
            <input type="text" placeholder="注册邮箱"/>
            <input type="text" placeholder="学号/职工号"/>
            <input type="password" placeholder="一卡通密码"/>
            <div class="CAPTCHA-box">
                <input type="text" class="small-input" placeholder="验证码"/>
                <img src="#" alt="验证码" class="CAPTCHA"/>
            </div>

            <a class="button">
                <span class="fa fa-check"></span>
            </a>
            <a href="javascript:(function(){convert(card2,card1);})();" class="login-link">登陆</a>
            <a href="javascript:(function(){convert(card2,card3);})();" class="password-back-link">找回密码</a>
        </form>
    </div>

    <div id="password-back" class="card flip out">
        <a class="buaa-logo"></a>
        <i class="logo-shadow"></i>
        <div id="nav">
            <a href="#" class="active-link">注册手机号找回</a>
            <a href="#" class="inactive-link">注册邮箱找回</a>
        </div>

        <form action="#">
            <input type="text" placeholder="手机号码"/>
            <div class="CAPTCHA-box">
                <input type="text" class="small-input" placeholder="验证码"/>
                <img src="#" alt="验证码" class="CAPTCHA"/>
            </div>
            <a class="button">
                <span class="fa fa-check"></span>
            </a>
            <a href="javascript:(function(){convert(card3,card1);})();" class="login-link">登陆</a>
            <a href="javascript:(function(){convert(card3,card2);})();" class="register-link">新用户注册</a>
            <!--<a href="#" class="password-back-link">找回密码</a>-->
        </form>
    </div>
</body>
<script>

    var card1 = document.getElementById('login-tp');
    var card2 = document.getElementById('register');
    var card3 = document.getElementById('password-back');
    var mov_bg = document.getElementById('mov-bg');

    //翻牌用~
    function convert(from,to) {
        var eleBack = null, eleFront = null,
                eleList = [from,to];//纸牌元素列表
        function funBackOrFront() {

            for(var i=0;i<eleList.length; i++) {
                if(eleList[i].classList.contains('out')) {
                    eleBack = eleList[i];
                }
                else {
                    eleFront = eleList[i];
                }
            }
        }

        if(get_browser().indexOf('Safari')!= -1){
            mov_bg._css("opacity","0");
            funBackOrFront();
            setTimeout(function() {
                eleFront.classList.add('out');
                eleFront.classList.remove('in');
                funBackOrFront();
            }, 500);
            setTimeout(function() {
                eleBack.classList.add('in');
                eleBack.classList.remove('out');
//            eleBack.addClass("in").removeClass("out");
                // 重新确定正反元素
                funBackOrFront();

            }, 825);
            setTimeout(function() {
                mov_bg._css("opacity","1");
            }, 1000);
        }

        else {
            funBackOrFront();
            eleFront.classList.add('out');
            eleFront.classList.remove('in');
            setTimeout(function() {
                eleBack.classList.add('in');
                eleBack.classList.remove('out');
                funBackOrFront();
            }, 225);
        }




        // 切换的顺序如下
        // 1. 当前在前显示的元素翻转90度隐藏, 动画时间225毫秒
        // 2. 结束后，之前显示在后面的元素逆向90度翻转显示在前
        // 3. 完成翻面效果


        return false;
    }



</script>
</html>